ุงุณู ุงูููู: characterCommand.js

ูุญุชูู ุงูููู ุงููุญูู:
const axios = require( axios );
const { ูุนูููุงุช_ุงูููุงุฉ } = require( ../lib/messageConfig );

async function ุฃูุฑ_ุชุญููู_ุงูุดุฎุตูุฉ(ุณูู, ูุนุฑู_ุงูุฏุฑุฏุดุฉ, ุฑุณุงูุฉ) {
    let ูุณุชุฎุฏู_ููุชุญููู;
    
    // ุงูุชุญูู ูู ุงููุณุชุฎุฏููู ุงููุฐููุฑูู
    if (ุฑุณุงูุฉ.message?.extendedTextMessage?.contextInfo?.mentionedJid?.length > 0) {
        ูุณุชุฎุฏู_ููุชุญููู = ุฑุณุงูุฉ.message.extendedTextMessage.contextInfo.mentionedJid[0];
    }
    // ุงูุชุญูู ูู ุงูุฑุณุงูุฉ ุงูุชู ุชู ุงูุฑุฏ ุนูููุง
    else if (ุฑุณุงูุฉ.message?.extendedTextMessage?.contextInfo?.participant) {
        ูุณุชุฎุฏู_ููุชุญููู = ุฑุณุงูุฉ.message.extendedTextMessage.contextInfo.participant;
    }
    
    if (!ูุณุชุฎุฏู_ููุชุญููู) {
        await ุณูู.sendMessage(ูุนุฑู_ุงูุฏุฑุฏุดุฉ, { 
            text:  ูุฑุฌู ุฐูุฑ ุดุฎุต ูุง ุฃู ุงูุฑุฏ ุนูู ุฑุณุงูุชู ูุชุญููู ุดุฎุตูุชู! , 
            ...ูุนูููุงุช_ุงูููุงุฉ 
        });
        return;
    }

    try {
        // ุงูุญุตูู ุนูู ุตูุฑุฉ ุงูููู ุงูุดุฎุตู ูููุณุชุฎุฏู
        let ุตูุฑุฉ_ุงูููู_ุงูุดุฎุตู;
        try {
            ุตูุฑุฉ_ุงูููู_ุงูุดุฎุตู = await ุณูู.profilePictureUrl(ูุณุชุฎุฏู_ููุชุญููู,  image );
        } catch {
            ุตูุฑุฉ_ุงูููู_ุงูุดุฎุตู =  https://i.imgur.com/2wzGhpF.jpeg ; // ุตูุฑุฉ ุงูุชุฑุงุถูุฉ ุฅุฐุง ูู ููู ููุงู ุตูุฑุฉ ููู ุดุฎุตู
        }

        const ุงูุตูุงุช = [
            "ุฐูู", "ูุจุฏุน", "ูุตูู", "ุทููุญ", "ููุชู ุจุงูุขุฎุฑูู",
            "ุฌุฐุงุจ", "ูุงุซู", "ูุชุณุงูุญ", "ูุดูุท", "ูุฏูุฏ",
            "ูุฑูู", "ุตุงุฏู", "ูุถุญู", "ุฎูุงูู", "ูุณุชูู",
            "ุจุฏููู", "ูุทูู", "ููุทูู", "ููู", "ูุชูุงุฆู",
            "ุดุบูู", "ุตุจูุฑ", "ูุซุงุจุฑ", "ููุซูู", "ููููุจ",
            "ุตุฑูุญ", "ูุฏุฑูุณ", "ูุชููู", "ูุชุนุฏุฏ ุงูููุงูุจ", "ุญููู"
        ];

        // ุงูุญุตูู ุนูู 3-5 ุตูุงุช ุนุดูุงุฆูุฉ
        const ุนุฏุฏ_ุงูุตูุงุช = Math.floor(Math.random() * 3) + 3; // ุฑูู ุนุดูุงุฆู ุจูู 3 ู 5
        const ุงูุตูุงุช_ุงููุฎุชุงุฑุฉ = [];
        for (let i = 0; i < ุนุฏุฏ_ุงูุตูุงุช; i++) {
            const ุตูุฉ_ุนุดูุงุฆูุฉ = ุงูุตูุงุช[Math.floor(Math.random() * ุงูุตูุงุช.length)];
            if (!ุงูุตูุงุช_ุงููุฎุชุงุฑุฉ.includes(ุตูุฉ_ุนุดูุงุฆูุฉ)) {
                ุงูุตูุงุช_ุงููุฎุชุงุฑุฉ.push(ุตูุฉ_ุนุดูุงุฆูุฉ);
            }
        }

        // ุญุณุงุจ ุงููุณุจ ุงููุฆููุฉ ุงูุนุดูุงุฆูุฉ ููู ุตูุฉ
        const ูุณุจ_ุงูุตูุงุช = ุงูุตูุงุช_ุงููุฎุชุงุฑุฉ.map(ุตูุฉ => {
            const ุงููุณุจุฉ = Math.floor(Math.random() * 41) + 60; // ุฑูู ุนุดูุงุฆู ุจูู 60-100
            return `${ุตูุฉ}: ${ุงููุณุจุฉ}%`;
        });

        // ุฅูุดุงุก ุฑุณุงูุฉ ุชุญููู ุงูุดุฎุตูุฉ
        const ุงูุชุญููู = `๐ฎ *ุชุญููู ุงูุดุฎุตูุฉ* ๐ฎ\n\n` +
            `๐ค *ุงููุณุชุฎุฏู:* ${ูุณุชุฎุฏู_ููุชุญููู.split( @ )[0]}\n\n` +
            `โจ *ุงูุตูุงุช ุงูุฑุฆูุณูุฉ:*\n${ูุณุจ_ุงูุตูุงุช.join( \n )}\n\n` +
            `๐ฏ *ุงูุชูููู ุงูุนุงู:* ${Math.floor(Math.random() * 21) + 80}%\n\n` +
            `ููุงุญุธุฉ: ูุฐุง ุชุญููู ุชุฑูููู ููุง ูุฌุจ ุฃุฎุฐู ุนูู ูุญูู ุงูุฌุฏ!`;

        // ุฅุฑุณุงู ุงูุชุญููู ูุน ุตูุฑุฉ ุงูููู ุงูุดุฎุตู ูููุณุชุฎุฏู
        await ุณูู.sendMessage(ูุนุฑู_ุงูุฏุฑุฏุดุฉ, {
            image: { url: ุตูุฑุฉ_ุงูููู_ุงูุดุฎุตู },
            caption: ุงูุชุญููู,
            mentions: [ูุณุชุฎุฏู_ููุชุญููู],
            ...ูุนูููุงุช_ุงูููุงุฉ
        });

    } catch (ุฎุทุฃ) {
        console.error( ุฎุทุฃ ูู ุฃูุฑ ุชุญููู ุงูุดุฎุตูุฉ: , ุฎุทุฃ);
        await ุณูู.sendMessage(ูุนุฑู_ุงูุฏุฑุฏุดุฉ, { 
            text:  ูุดู ูู ุชุญููู ุงูุดุฎุตูุฉ! ุญุงูู ูุฑุฉ ุฃุฎุฑู ูุงุญูุงู. ,
            ...ูุนูููุงุช_ุงูููุงุฉ 
        });
    }
}

module.exports = ุฃูุฑ_ุชุญููู_ุงูุดุฎุตูุฉ;