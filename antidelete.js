const fs = require( fs );
const path = require( path );
const { tmpdir } = require( os );
const { downloadContentFromMessage } = require( @whiskeysockets/baileys );
const { writeFile } = require( fs/promises );

const ุชุฎุฒูู_ุงูุฑุณุงุฆู = new Map();
const ูุณุงุฑ_ุงูุฅุนุฏุงุฏุงุช = path.join(__dirname,  ../data/antidelete.json );
const ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ = path.join(__dirname,  ../tmp );

// ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงููุฌูุฏ ุงููุคูุช
if (!fs.existsSync(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ)) {
    fs.mkdirSync(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ, { recursive: true });
}

// ุฏุงูุฉ ููุญุตูู ุนูู ุญุฌู ุงููุฌูุฏ ุจุงูููุบุงุจุงูุช
const ุงูุญุตูู_ุนูู_ุญุฌู_ุงููุฌูุฏ_ุจุงูููุฌุงุจุงูุช = (ูุณุงุฑ_ุงููุฌูุฏ) => {
    try {
        const ุงููููุงุช = fs.readdirSync(ูุณุงุฑ_ุงููุฌูุฏ);
        let ุงูุญุฌู_ุงูููู = 0;

        for (const ููู of ุงููููุงุช) {
            const ูุณุงุฑ_ุงูููู = path.join(ูุณุงุฑ_ุงููุฌูุฏ, ููู);
            if (fs.statSync(ูุณุงุฑ_ุงูููู).isFile()) {
                ุงูุญุฌู_ุงูููู += fs.statSync(ูุณุงุฑ_ุงูููู).size;
            }
        }

        return ุงูุญุฌู_ุงูููู / (1024 * 1024); // ุชุญููู ุงูุจุงูุช ุฅูู ููุบุงุจุงูุช
    } catch (ุฎุทุฃ) {
        console.error( ุฎุทุฃ ูู ุงูุญุตูู ุนูู ุญุฌู ุงููุฌูุฏ: , ุฎุทุฃ);
        return 0;
    }
};

// ุฏุงูุฉ ูุชูุธูู ุงููุฌูุฏ ุงููุคูุช ุฅุฐุง ุชุฌุงูุฒ ุงูุญุฌู 10 ููุบุงุจุงูุช
const ุชูุธูู_ุงููุฌูุฏ_ุงููุคูุช_ุฅุฐุง_ูุงู_ูุจูุฑุงู = () => {
    try {
        const ุงูุญุฌู_ุจุงูููุฌุงุจุงูุช = ุงูุญุตูู_ุนูู_ุญุฌู_ุงููุฌูุฏ_ุจุงูููุฌุงุจุงูุช(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ);
        
        if (ุงูุญุฌู_ุจุงูููุฌุงุจุงูุช > 200) {
            const ุงููููุงุช = fs.readdirSync(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ);
            for (const ููู of ุงููููุงุช) {
                const ูุณุงุฑ_ุงูููู = path.join(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ, ููู);
                fs.unlinkSync(ูุณุงุฑ_ุงูููู);
            }
        }
    } catch (ุฎุทุฃ) {
        console.error( ุฎุทุฃ ูู ุชูุธูู ุงููุฌูุฏ ุงููุคูุช: , ุฎุทุฃ);
    }
};

// ุจุฏุก ุงูุชุญูู ุงูุฏูุฑู ููุชูุธูู ูู ุฏูููุฉ
setInterval(ุชูุธูู_ุงููุฌูุฏ_ุงููุคูุช_ุฅุฐุง_ูุงู_ูุจูุฑุงู, 60 * 1000);

// ุชุญููู ุงูุฅุนุฏุงุฏุงุช
function ุชุญููู_ุฅุนุฏุงุฏุงุช_ููุน_ุงูุญุฐู() {
    try {
        if (!fs.existsSync(ูุณุงุฑ_ุงูุฅุนุฏุงุฏุงุช)) return { ููุนูู: false };
        return JSON.parse(fs.readFileSync(ูุณุงุฑ_ุงูุฅุนุฏุงุฏุงุช));
    } catch {
        return { ููุนูู: false };
    }
}

// ุญูุธ ุงูุฅุนุฏุงุฏุงุช
function ุญูุธ_ุฅุนุฏุงุฏุงุช_ููุน_ุงูุญุฐู(ุฅุนุฏุงุฏุงุช) {
    try {
        fs.writeFileSync(ูุณุงุฑ_ุงูุฅุนุฏุงุฏุงุช, JSON.stringify(ุฅุนุฏุงุฏุงุช, null, 2));
    } catch (ุฎุทุฃ) {
        console.error( ุฎุทุฃ ูู ุญูุธ ุงูุฅุนุฏุงุฏุงุช: , ุฎุทุฃ);
    }
}

const ูู_ุงููุงูู_ุฃู_ุณูุฏู = require( ../lib/isOwner );

// ูุนุงูุฌ ุงูุฃูุฑ
async function ุงูุชุนุงูู_ูุน_ุฃูุฑ_ููุน_ุงูุญุฐู(ุณูู, ูุนุฑู_ุงูุฏุฑุฏุดุฉ, ุฑุณุงูุฉ, ูุทุงุจูุฉ) {
    const ูุนุฑู_ุงููุฑุณู = ุฑุณุงูุฉ.key.participant || ุฑุณุงูุฉ.key.remoteJid;
    const ูุงูู = await ูู_ุงููุงูู_ุฃู_ุณูุฏู(ูุนุฑู_ุงููุฑุณู, ุณูู, ูุนุฑู_ุงูุฏุฑุฏุดุฉ);
    
    if (!ุฑุณุงูุฉ.key.fromMe && !ูุงูู) {
        return ุณูู.sendMessage(ูุนุฑู_ุงูุฏุฑุฏุดุฉ, { text:  *ููุท ูุงูู ุงูุจูุช ููููู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฃูุฑ.*  }, { quoted: ุฑุณุงูุฉ });
    }

    const ุงูุฅุนุฏุงุฏุงุช = ุชุญููู_ุฅุนุฏุงุฏุงุช_ููุน_ุงูุญุฐู();

    if (!ูุทุงุจูุฉ) {
        return ุณูู.sendMessage(ูุนุฑู_ุงูุฏุฑุฏุดุฉ, {
            text: `*ุฅุนุฏุงุฏุงุช ููุน ุงูุญุฐู*\n\nุงูุญุงูุฉ ุงูุญุงููุฉ: ${ุงูุฅุนุฏุงุฏุงุช.ููุนูู ?  โ ููุนูู  :  โ ุบูุฑ ููุนูู }\n\n*.antidelete on* - ุชูุนูู\n*.antidelete off* - ุชุนุทูู`
        }, {quoted: ุฑุณุงูุฉ});
    }

    if (ูุทุงุจูุฉ ===  on ) {
        ุงูุฅุนุฏุงุฏุงุช.ููุนูู = true;
    } else if (ูุทุงุจูุฉ ===  off ) {
        ุงูุฅุนุฏุงุฏุงุช.ููุนูู = false;
    } else {
        return ุณูู.sendMessage(ูุนุฑู_ุงูุฏุฑุฏุดุฉ, { text:  *ุฃูุฑ ุบูุฑ ุตุงูุญ. ุงุณุชุฎุฏู .antidelete ูุฑุคูุฉ ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู.*  }, {quoted:ุฑุณุงูุฉ});
    }

    ุญูุธ_ุฅุนุฏุงุฏุงุช_ููุน_ุงูุญุฐู(ุงูุฅุนุฏุงุฏุงุช);
    return ุณูู.sendMessage(ูุนุฑู_ุงูุฏุฑุฏุดุฉ, { text: `*ุชู ${ูุทุงุจูุฉ ===  on  ?  ุชูุนูู  :  ุชุนุทูู } ููุน ุงูุญุฐู*` }, {quoted:ุฑุณุงูุฉ});
}

// ุชุฎุฒูู ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ (ูุชุนุงูู ุฃูุถูุง ูุน ููุน ุงูุฑุณุงุฆู ุฐุงุช ุงููุดุงูุฏุฉ ุงููุงุญุฏุฉ ุนู ุทุฑูู ุฅุนุงุฏุฉ ุงูุชูุฌูู ููุฑูุง)
async function ุชุฎุฒูู_ุงูุฑุณุงูุฉ(ุณูู, ุฑุณุงูุฉ) {
    try {
        const ุงูุฅุนุฏุงุฏุงุช = ุชุญููู_ุฅุนุฏุงุฏุงุช_ููุน_ุงูุญุฐู();
        if (!ุงูุฅุนุฏุงุฏุงุช.ููุนูู) return; // ูุง ุชุฎุฒู ุฅุฐุง ูุงู ููุน ุงูุญุฐู ูุนุทู

        if (!ุฑุณุงูุฉ.key?.id) return;

        const ูุนุฑู_ุงูุฑุณุงูุฉ = ุฑุณุงูุฉ.key.id;
        let ูุญุชูู =   ;
        let ููุน_ุงููุณุงุฆุท =   ;
        let ูุณุงุฑ_ุงููุณุงุฆุท =   ;
        let ูุดุงูุฏุฉ_ูุงุญุฏุฉ = false;

        const ุงููุฑุณู = ุฑุณุงูุฉ.key.participant || ุฑุณุงูุฉ.key.remoteJid;

        // ุงูุชุดุงู ุงููุญุชูู (ุจูุง ูู ุฐูู ุฑุณุงุฆู ุงููุดุงูุฏุฉ ุงููุงุญุฏุฉ)
        const ุญุงููุฉ_ุงููุดุงูุฏุฉ_ุงููุงุญุฏุฉ = ุฑุณุงูุฉ.message?.viewOnceMessageV2?.message || ุฑุณุงูุฉ.message?.viewOnceMessage?.message;
        if (ุญุงููุฉ_ุงููุดุงูุฏุฉ_ุงููุงุญุฏุฉ) {
            // ูู ูุญุชูู ุงููุดุงูุฏุฉ ุงููุงุญุฏุฉ
            if (ุญุงููุฉ_ุงููุดุงูุฏุฉ_ุงููุงุญุฏุฉ.imageMessage) {
                ููุน_ุงููุณุงุฆุท =  ุตูุฑุฉ ;
                ูุญุชูู = ุญุงููุฉ_ุงููุดุงูุฏุฉ_ุงููุงุญุฏุฉ.imageMessage.caption ||   ;
                const ุงููุฎุฒู_ุงููุคูุช = await downloadContentFromMessage(ุญุงููุฉ_ุงููุดุงูุฏุฉ_ุงููุงุญุฏุฉ.imageMessage,  image );
                ูุณุงุฑ_ุงููุณุงุฆุท = path.join(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ, `${ูุนุฑู_ุงูุฑุณุงูุฉ}.jpg`);
                await writeFile(ูุณุงุฑ_ุงููุณุงุฆุท, ุงููุฎุฒู_ุงููุคูุช);
                ูุดุงูุฏุฉ_ูุงุญุฏุฉ = true;
            } else if (ุญุงููุฉ_ุงููุดุงูุฏุฉ_ุงููุงุญุฏุฉ.videoMessage) {
                ููุน_ุงููุณุงุฆุท =  ููุฏูู ;
                ูุญุชูู = ุญุงููุฉ_ุงููุดุงูุฏุฉ_ุงููุงุญุฏุฉ.videoMessage.caption ||   ;
                const ุงููุฎุฒู_ุงููุคูุช = await downloadContentFromMessage(ุญุงููุฉ_ุงููุดุงูุฏุฉ_ุงููุงุญุฏุฉ.videoMessage,  video );
                ูุณุงุฑ_ุงููุณุงุฆุท = path.join(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ, `${ูุนุฑู_ุงูุฑุณุงูุฉ}.mp4`);
                await writeFile(ูุณุงุฑ_ุงููุณุงุฆุท, ุงููุฎุฒู_ุงููุคูุช);
                ูุดุงูุฏุฉ_ูุงุญุฏุฉ = true;
            }
        } else if (ุฑุณุงูุฉ.message?.conversation) {
            ูุญุชูู = ุฑุณุงูุฉ.message.conversation;
        } else if (ุฑุณุงูุฉ.message?.extendedTextMessage?.text) {
            ูุญุชูู = ุฑุณุงูุฉ.message.extendedTextMessage.text;
        } else if (ุฑุณุงูุฉ.message?.imageMessage) {
            ููุน_ุงููุณุงุฆุท =  ุตูุฑุฉ ;
            ูุญุชูู = ุฑุณุงูุฉ.message.imageMessage.caption ||   ;
            const ุงููุฎุฒู_ุงููุคูุช = await downloadContentFromMessage(ุฑุณุงูุฉ.message.imageMessage,  image );
            ูุณุงุฑ_ุงููุณุงุฆุท = path.join(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ, `${ูุนุฑู_ุงูุฑุณุงูุฉ}.jpg`);
            await writeFile(ูุณุงุฑ_ุงููุณุงุฆุท, ุงููุฎุฒู_ุงููุคูุช);
        } else if (ุฑุณุงูุฉ.message?.stickerMessage) {
            ููุน_ุงููุณุงุฆุท =  ููุตู ;
            const ุงููุฎุฒู_ุงููุคูุช = await downloadContentFromMessage(ุฑุณุงูุฉ.message.stickerMessage,  sticker );
            ูุณุงุฑ_ุงููุณุงุฆุท = path.join(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ, `${ูุนุฑู_ุงูุฑุณุงูุฉ}.webp`);
            await writeFile(ูุณุงุฑ_ุงููุณุงุฆุท, ุงููุฎุฒู_ุงููุคูุช);
        } else if (ุฑุณุงูุฉ.message?.videoMessage) {
            ููุน_ุงููุณุงุฆุท =  ููุฏูู ;
            ูุญุชูู = ุฑุณุงูุฉ.message.videoMessage.caption ||   ;
            const ุงููุฎุฒู_ุงููุคูุช = await downloadContentFromMessage(ุฑุณุงูุฉ.message.videoMessage,  video );
            ูุณุงุฑ_ุงููุณุงุฆุท = path.join(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ, `${ูุนุฑู_ุงูุฑุณุงูุฉ}.mp4`);
            await writeFile(ูุณุงุฑ_ุงููุณุงุฆุท, ุงููุฎุฒู_ุงููุคูุช);
        } else if (ุฑุณุงูุฉ.message?.audioMessage) {
            ููุน_ุงููุณุงุฆุท =  ุตูุช ;
            const ููุน_ุงููุญุชูู = ุฑุณุงูุฉ.message.audioMessage.mimetype ||   ;
            const ุงูุฅูุชุฏุงุฏ = ููุน_ุงููุญุชูู.includes( mpeg ) ?  mp3  : (ููุน_ุงููุญุชูู.includes( ogg ) ?  ogg  :  mp3 );
            const ุงููุฎุฒู_ุงููุคูุช = await downloadContentFromMessage(ุฑุณุงูุฉ.message.audioMessage,  audio );
            ูุณุงุฑ_ุงููุณุงุฆุท = path.join(ูุฌูุฏ_ุงููุณุงุฆุท_ุงููุคูุชุฉ, `${ูุนุฑู_ุงูุฑุณุงูุฉ}.${ุงูุฅูุชุฏุงุฏ}`);
            await writeFile(ูุณุงุฑ_ุงููุณุงุฆุท, ุงููุฎุฒู_ุงููุคูุช);
        }

        ุชุฎุฒูู_ุงูุฑุณุงุฆู.set(ูุนุฑู_ุงูุฑุณุงูุฉ, {
            ูุญุชูู,
            ููุน_ุงููุณุงุฆุท,
            ูุณุงุฑ_ุงููุณุงุฆุท,
            ุงููุฑุณู,
            ูุฌููุนุฉ: ุฑุณุงูุฉ.key.remoteJid.endsWith( @g.us ) ? ุฑุณุงูุฉ.key.remoteJid : null,
            ุงูุทุงุจุน_ุงูุฒููู: new Date().toISOString()
        });

        // ููุน ุงููุดุงูุฏุฉ ุงููุงุญุฏุฉ: ุฅุนุงุฏุฉ ุงูุชูุฌูู ููุฑูุง ุฅูู ุงููุงูู ุฅุฐุง ุชู ุงูุชูุงุทูุง
        if (ูุดุงูุฏุฉ_ูุงุญุฏุฉ && ููุน_ุงููุณุงุฆุท && fs.existsSync(ูุณุงุฑ_ุงููุณุงุฆุท)) {
            try {
                const ุฑูู_ุงููุงูู = ุณูู.user.id.split( : )[0] +  @s.whatsapp.net ;
                const ุงุณู_ุงููุฑุณู = ุงููุฑุณู.split( @ )[0];
                const ุฎูุงุฑุงุช_ุงููุณุงุฆุท = {
                    caption: `*ูุญุชูู ูุดุงูุฏูุฉ ูุงุญุฏุฉ ${ููุน_ุงููุณุงุฆุท}*
ูู: @${ุงุณู_ุงููุฑุณู}`,
                    mentions: [ุงููุฑุณู]
                };
                if (ููุน_ุงููุณุงุฆุท ===  ุตูุฑุฉ ) {
                    await ุณูู.sendMessage(ุฑูู_ุงููุงูู, { image: { url: ูุณุงุฑ_ุงููุณุงุฆุท }, ...ุฎูุงุฑุงุช_ุงููุณุงุฆุท });
                } else if (ููุน_ุงููุณุงุฆุท ===  ููุฏูู ) {
                    await ุณูู.sendMessage(ุฑูู_ุงููุงูู, { video: { url: ูุณุงุฑ_ุงููุณุงุฆุท }, ...ุฎูุงุฑุงุช_ุงููุณุงุฆุท });
                }
                // ุงูุชูุธูู ุงูููุฑู ููุญุชูู ุงููุดุงูุฏุฉ ุงููุงุญุฏุฉ ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชูุฌูู
                try { fs.unlinkSync(ูุณุงุฑ_ุงููุณุงุฆุท); } catch {}
            } catch (ุฎุทุฃ) {
                // ุชุฌุงูู
            }
        }

    } catch (ุฎุทุฃ) {
        console.error( ุฎุทุฃ ูู ุชุฎุฒูู ุงูุฑุณุงูุฉ: , ุฎุทุฃ);
    }
}

// ุงูุชุนุงูู ูุน ุญุฐู ุงูุฑุณุงุฆู
async function ุงูุชุนุงูู_ูุน_ุฅูุบุงุก_ุงูุฑุณุงูุฉ(ุณูู, ุฑุณุงูุฉ_ุงูุฅูุบุงุก) {
    try {
        const ุงูุฅุนุฏุงุฏุงุช = ุชุญููู_ุฅุนุฏุงุฏุงุช_ููุน_ุงูุญุฐู();
        if (!ุงูุฅุนุฏุงุฏุงุช.ููุนูู) return;

        const ูุนุฑู_ุงูุฑุณุงูุฉ = ุฑุณุงูุฉ_ุงูุฅูุบุงุก.message.protocolMessage.key.id;
        const ูุญุฐูู_ูู_ูุจู = ุฑุณุงูุฉ_ุงูุฅูุบุงุก.participant || ุฑุณุงูุฉ_ุงูุฅูุบุงุก.key.participant || ุฑุณุงูุฉ_ุงูุฅูุบุงุก.key.remoteJid;
        const ุฑูู_ุงููุงูู = ุณูู.user.id.split( : )[0] +  @s.whatsapp.net ;

        if (ูุญุฐูู_ูู_ูุจู.includes(ุณูู.user.id) || ูุญุฐูู_ูู_ูุจู === ุฑูู_ุงููุงูู) return;

        const ุงูุฃุตููุฉ = ุชุฎุฒูู_ุงูุฑุณุงุฆู.get(ูุนุฑู_ุงูุฑุณุงูุฉ);
        if (!ุงูุฃุตููุฉ) return;

        const ุงููุฑุณู = ุงูุฃุตููุฉ.ุงููุฑุณู;
        const ุงุณู_ุงููุฑุณู = ุงููุฑุณู.split( @ )[0];
        const ุงุณู_ุงููุฌููุนุฉ = ุงูุฃุตููุฉ.ูุฌููุนุฉ ? (await ุณูู.groupMetadata(ุงูุฃุตููุฉ.ูุฌููุนุฉ)).subject :   ;

        const ุงูููุช = new Date().toLocaleString( en-US , {
            timeZone:  Asia/Kolkata ,
            hour12: true, hour:  2-digit , minute:  2-digit , second:  2-digit ,
            day:  2-digit , month:  2-digit , year:  numeric 
        });

        let ูุต = `*๐ฐ ุชูุฑูุฑ ููุน ุงูุญุฐู ๐ฐ*\n\n` +
            `*๐๏ธ ุญุฐู ูู ูุจู:* @${ูุญุฐูู_ูู_ูุจู.split( @ )[0]}\n` +
            `*๐ค ุงููุฑุณู:* @${ุงุณู_ุงููุฑุณู}\n` +
            `*๐ฑ ุงูุฑูู:* ${ุงููุฑุณู}\n` +
            `*๐ ุงูููุช:* ${ุงูููุช}\n`;

        if (ุงุณู_ุงููุฌููุนุฉ) ูุต += `*๐ฅ ุงููุฌููุนุฉ:* ${ุงุณู_ุงููุฌููุนุฉ}\n`;

        if (ุงูุฃุตููุฉ.ูุญุชูู) {
            ูุต += `\n*๐ฌ ุงูุฑุณุงูุฉ ุงููุญุฐููุฉ:*\n${ุงูุฃุตููุฉ.ูุญุชูู}`;
        }

        await ุณูู.sendMessage(ุฑูู_ุงููุงูู, {
            text: ูุต,
            mentions: [ูุญุฐูู_ูู_ูุจู, ุงููุฑุณู]
        });

        // ุฅุฑุณุงู ุงููุณุงุฆุท
        if (ุงูุฃุตููุฉ.ููุน_ุงููุณุงุฆุท && fs.existsSync(ุงูุฃุตููุฉ.ูุณุงุฑ_ุงููุณุงุฆุท)) {
            const ุฎูุงุฑุงุช_ุงููุณุงุฆุท = {
                caption: `*${ุงูุฃุตููุฉ.ููุน_ุงููุณุงุฆุท} ูุญุฐูู*\nูู: @${ุงุณู_ุงููุฑุณู}`,
                mentions: [ุงููุฑุณู]
            };

            try {
                switch (ุงูุฃุตููุฉ.ููุน_ุงููุณุงุฆุท) {
                    case  ุตูุฑุฉ :
                        await ุณูู.sendMessage(ุฑูู_ุงููุงูู, {
                            image: { url: ุงูุฃุตููุฉ.ูุณุงุฑ_ุงููุณุงุฆุท },
                            ...ุฎูุงุฑุงุช_ุงููุณุงุฆุท
                        });
                        break;
                    case  ููุตู :
                        await ุณูู.sendMessage(ุฑูู_ุงููุงูู, {
                            sticker: { url: ุงูุฃุตููุฉ.ูุณุงุฑ_ุงููุณุงุฆุท },
                            ...ุฎูุงุฑุงุช_ุงููุณุงุฆุท
                        });
                        break;
                    case  ููุฏูู :
                        await ุณูู.sendMessage(ุฑูู_ุงููุงูู, {
                            video: { url: ุงูุฃุตููุฉ.ูุณุงุฑ_ุงููุณุงุฆุท },
                            ...ุฎูุงุฑุงุช_ุงููุณุงุฆุท
                        });
                        break;
                    case  ุตูุช :
                        await ุณูู.sendMessage(ุฑูู_ุงููุงูู, {
                            audio: { url: ุงูุฃุตููุฉ.ูุณุงุฑ_ุงููุณุงุฆุท },
                            mimetype:  audio/mpeg ,
                            ptt: false,
                            ...ุฎูุงุฑุงุช_ุงููุณุงุฆุท
                        });
                        break;
                }
            } catch (ุฎุทุฃ) {
                await ุณูู.sendMessage(ุฑูู_ุงููุงูู, {
                    text: `โ๏ธ ุฎุทุฃ ูู ุฅุฑุณุงู ุงููุณุงุฆุท: ${ุฎุทุฃ.message}`
                });
            }

            // ุงูุชูุธูู
            try {
                fs.unlinkSync(ุงูุฃุตููุฉ.ูุณุงุฑ_ุงููุณุงุฆุท);
            } catch (ุฎุทุฃ) {
                console.error( ุฎุทุฃ ูู ุชูุธูู ุงููุณุงุฆุท: , ุฎุทุฃ);
            }
        }

        ุชุฎุฒูู_ุงูุฑุณุงุฆู.delete(ูุนุฑู_ุงูุฑุณุงูุฉ);

    } catch (ุฎุทุฃ) {
        console.error( ุฎุทุฃ ูู ุงูุชุนุงูู ูุน ุฅูุบุงุก ุงูุฑุณุงูุฉ: , ุฎุทุฃ);
    }
}

module.exports = {
    ุงูุชุนุงูู_ูุน_ุฃูุฑ_ููุน_ุงูุญุฐู,
    ุงูุชุนุงูู_ูุน_ุฅูุบุงุก_ุงูุฑุณุงูุฉ,
    ุชุฎุฒูู_ุงูุฑุณุงูุฉ
};